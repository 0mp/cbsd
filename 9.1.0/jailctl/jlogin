#!/bin/sh
#v9.0.1
globalconf="${workdir}/cbsd.conf";
MYARG=""
MYOPTARG="jname"
MYDESC="Exec login into jail"

# Login by jid not supported yet

[ -f "${globalconf}" ] || err 1 "no such conf file";
. ${globalconf}
. ${subr}
init $*

[ -n "$jname" ] || jname=$1

JAILRCCONF="${jailrcconfdir}/rc.conf_${jname}"

[ -f  "${JAILRCCONF}" ] || err 1 "no conf rc.conf file for jail"

. ${JAILRCCONF}
eval path=\"\$path\"
eval baserw=\"\$baserw\"
eval data=\"\$data\"
eval host_hostname=\"\$host_hostname\"
[ $baserw -eq 1 ] && path=$data

get_jid
jid=$?
[ $jid -eq 0 ] && err 1 "Not running"
/usr/sbin/jexec ${jid} login -f root
