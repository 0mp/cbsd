myenv="mc"
ver="9.1"
arch="native"
repoversion="version1"
pkg="\
misc/mc
"

buildme()
{
. ${jailrcconfdir}/rc.conf_${myenv}

cat > ${path}/root/make.sh << EOF
#!/bin/sh
mkdir -p /var/db/pkg /var/run /usr/local/etc
env ASSUME_ALWAYS_YES=yes pkg
EOF

for i in ${pkg}; do
MYPORT="/usr/ports/${i}"
PORTNAME=`make -C ${MYPORT} package-name`
TXZPATH="/repo/${repoversion}/${PORTNAME}.txz"

cat >> ${path}/root/make.sh << EOF
[ -f "${TXZPATH}" ] && {
cd /repo/${repoversion}
env ASSUME_ALWAYS_YES=yes pkg add ${TXZPATH}
}
EOF

done

chroot ${path} sh /root/make.sh
}

