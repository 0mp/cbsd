#!/bin/sh
globalconf="${workdir}/cbsd.conf";
GENUMARG=0
MYNUMARG=$#
MYDESC="Collect and store inventory information"

[ -f ${globalconf} ] || err 1 "no such conf file";
. ${globalconf}
. ${subr}
. ${tools}

init ${1}

ncpu=`/sbin/sysctl -n hw.ncpu`
physmem=$((`/sbin/sysctl -n hw.realmem` / 1048576))
disks=`/sbin/sysctl -n kern.disks`
ifaces=`cbsd nics-list | xargs`

modconf ${inventory} jail_interface "${ifaces}"
modconf ${inventory} ncpu "${ncpu}"
modconf ${inventory} physmem "${physmem}"
modconf ${inventory} disks "${disks}"

