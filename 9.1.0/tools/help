#!/bin/sh
#v9.1.0
globalconf="${workdir}/cbsd.conf";
MYARG=""
MYOPTARG=""
MYDESC="This help"

local _sdir _checkdir _dir _fl _cmddesc

if [ "$1" = "--help" ]; then
    echo $MYDESC
    exit
fi

_sdir="bin jailctl nodectl system tools"

_checkdir=""
for _dir in ${_sdir}; do
    _checkdir="${_checkdir} ${workdir}/${_dir}"
done

for _fl in `find ${_checkdir} -depth 1 -type f -perm 0755 -exec basename {} \;|sort -d`; do
    if [ `file ${workdir}/*/${_fl} |grep -c 'POSIX shell script'` = "1" ]; then
	_cmddesc=`cbsd ${_fl} --help |head -n1 2>/dev/null`
	echo "${_fl}  - ${_cmddesc}"
    else
	echo "${_fl}"
    fi
done

