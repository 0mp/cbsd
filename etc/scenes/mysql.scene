myenv="mysql"
ver="native"
arch="native"
repoversion="version1"

pkg="\
misc/mc \
databases/mysql55-server"

buildme()
{
. ${jailrcconfdir}/rc.conf_${myenv}

cat > ${path}/root/make.sh << EOF
#!/bin/sh
mkdir -p /var/db/pkg /var/run /usr/local/etc
env ASSUME_ALWAYS_YES=yes pkg
EOF

for i in ${pkg}; do
MYPORT="/usr/ports/${i}"
PORTNAME=`make -C ${MYPORT} package-name`
TXZPATH="/repo/All/${PORTNAME}.txz"

cat >> ${path}/root/make.sh << EOF
[ -f "${TXZPATH}" ] && {
cd /repo/All/
env ASSUME_ALWAYS_YES=yes pkg add ${TXZPATH}
}
EOF

done

cat >> ${path}/root/make.sh  <<EOF
mkdir /root/etc
cp /usr/local/share/mysql/my-huge.cnf /root/etc/my.cnf
ln -s /root/etc/my.cnf /var/db/mysql

cat >> /etc/rc.conf <<EEE
mysql_enable="YES"
#mysql_args="--skip-grant-tables --skip-networking"
EEE
EOF

chroot ${path} sh /root/make.sh
}

