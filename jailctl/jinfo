#!/bin/sh
#v9.1.0
globalconf="${workdir}/cbsd.conf";
MYARG="jname"
MYOPTARG="mode"
#mode=update
MYDESC="Update or view jail info"

[ -f ${globalconf} ] || err 1 "no such conf file";
. ${globalconf}
. ${subr}
init $*

[ -f ${sharedir}/jail-arg ] || err 1 "no jail-arg file";
. ${sharedir}/jail-arg

[ -n "${jname}" ] || err 1 "Give me jname"
JAILRCCONF="${jailrcconfdir}/rc.conf_${jname}"

[ -f  "${JAILRCCONF}" ] || err 1 "no conf rc.conf file for jail"
. ${JAILRCCONF}
INFO="${jailsysdir}/${jname}-info"

if [ "${mode}" = "update" ]; then
    if [ ! -f "${INFO}" ]; then
    cat > ${INFO} << EOF
JAILNAME=""
JAILVERSION=""
JAILDTVERSION=""
MASTER_SITES=""
MAINTAINER=""
ARCH=""
BASE=""
EOF
    fi
vi ${INFO}
else
    [ -f "${INFO}" ] || err 1 "No such jail info file"
    cat ${INFO}
fi
