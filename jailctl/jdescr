#!/bin/sh
#v9.0.0
globalconf="${workdir}/cbsd.conf";
MYARG="jname"
MYOPTARG="mode"
MYDESC="Show or modify jail description"
ADDHELP="mode=update for update information\n"

[ -f ${globalconf} ] || err 1 "no such conf file";
. ${globalconf}
. ${subr}
init $*

[ -f ${sharedir}/jail-arg ] || err 1 "no jail-arg file";
. ${sharedir}/jail-arg

[ -n "${jname}" ] || err 1 "Give me jname"
JAILRCCONF="${jailrcconfdir}/rc.conf_${jname}"

[ -f  "${JAILRCCONF}" ] || err 1 "no conf rc.conf file for jail"
. ${JAILRCCONF}
SYSDIR="${jailsysdir}/${jname}"
PDESCR="${SYSDIR}/${jname}-descr"

if [ "${mode}" = "update" ]; then
    echo "edit description"
    [ ! -d "${SYSDIR}" ] && mkdir -p ${SYSDIR}
    vi "${PDESCR}"
else
    [ -f "${PDESCR}" ] || err 1 "No such jail descr file"
    cat ${PDESCR}
fi
